parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Focm":[function(require,module,exports) {
var t,i,e,n,s,o,h,c,r,a,p,u,l,f,d,v,m,y,x,g,b,X,z={firstCubeSize:5,cubesCount:10},Y=0,w=0,E=50,I=50,M=0,B=0,T=0,C=0,k=0,j=0,S=0,L=0,P=0,D="rgba(0,0,0,0.1)",H=!1,q=!1,O=!0,V=250,A=0;function F(t){this.container=document.getElementById(t),this.ctx=this.container.getContext("2d"),this.resize=function(t,i){this.container.width=t,this.container.height=i}}function G(t,i,e){this.project=e,this.xo=i[0],this.yo=i[1],this.zo=i[2],this.cube=t}G.prototype.projection=function(){var t=v*(b*this.yo+g*this.xo)-m*this.zo,i=x*(v*this.zo+m*(b*this.yo+g*this.xo))+y*(g*this.yo-b*this.xo),e=y*(v*this.zo+m*(b*this.yo+g*this.xo))-x*(g*this.yo-b*this.xo);this.x=t,this.y=i,this.z=e,this.project&&(e<X&&(X=e),this.visible=A+e>0,this.X=.5*h+t*(V/(e+A)),this.Y=.5*c+i*(V/(e+A)))};var R=function(t,i,e){this.cube=t,this.p0=t.points[i[0]],this.p1=t.points[i[1]],this.p2=t.points[i[2]],this.p3=t.points[i[3]],this.normal=new G(this,e,!1),u++,document.getElementById("npoly").innerHTML=u};R.prototype={faceVisible:function(){return this.p0.visible&&this.p1.visible&&this.p2.visible&&this.p3.visible&&(this.p1.Y-this.p0.Y)/(this.p1.X-this.p0.X)<(this.p2.Y-this.p0.Y)/(this.p2.X-this.p0.X)^this.p0.X<this.p1.X==this.p0.X>this.p2.X?(this.visible=!0,!0):(this.visible=!1,this.distance=-99999,!1)},distanceToCamera:function(){var t=.25*(this.p0.x+this.p1.x+this.p2.x+this.p3.x),i=.25*(this.p0.y+this.p1.y+this.p2.y+this.p3.y),e=A+V+.25*(this.p0.z+this.p1.z+this.p2.z+this.p3.z);this.distance=Math.sqrt(t*t+i*i+e*e)},draw:function(){i.ctx.beginPath(),i.ctx.moveTo(this.p0.X,this.p0.Y),i.ctx.lineTo(this.p1.X,this.p1.Y),i.ctx.lineTo(this.p2.X,this.p2.Y),i.ctx.lineTo(this.p3.X,this.p3.Y),i.ctx.closePath(),this.normal.projection(),r?(this.normal.y,this.normal.z):this.normal.z,i.ctx.strokeStyle="rgba(255,255,255,1)",i.ctx.stroke()}};var W=function(t,i,e,s,o,h,c){this.w=c,this.points=[];var r=[[s-c,o-c,h-c],[s+c,o-c,h-c],[s+c,o+c,h-c],[s-c,o+c,h-c],[s-c,o-c,h+c],[s+c,o-c,h+c],[s+c,o+c,h+c],[s-c,o+c,h+c]];for(var u in r)this.points.push(new G(this,r[u],!0));var l=[[0,1,2,3],[0,4,5,1],[3,2,6,7],[0,3,7,4],[1,5,6,2],[5,4,7,6]],f=[[0,0,1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0],[0,0,-1]];for(var d in this.alpha=a?.5:1,l)n.push(new R(this,l[d],f[d]));p++},J=function(){h=t.offsetWidth,c=t.offsetHeight;var e=t;for(s=0,o=0;null!=e;e=e.offsetParent)s+=e.offsetLeft,o+=e.offsetTop;i.resize(h,c)},K=function(){e=[],n=[],p=0,u=0;for(var t=z.firstCubeSize,i=0;i<z.cubesCount;i++)e.push(new W(0,0,0,0,0,0,t)),t*=1.618},N=function(){t=document.getElementById("screen"),i=new F("canvas"),t.ontouchstart=t.onmousedown=function(e){if(!O)return!0;e.target===i.container&&(e.preventDefault(),t.setCapture&&t.setCapture(),d=!1,f=!0,k=(void 0!==e.clientX?e.clientX:e.touches[0].clientX)-s,j=(void 0!==e.clientY?e.clientY:e.touches[0].clientY)-o)},t.ontouchmove=t.onmousemove=function(t){if(!O)return!0;t.preventDefault(),Y=(void 0!==t.clientX?t.clientX:t.touches[0].clientX)-s,w=(void 0!==t.clientY?t.clientY:t.touches[0].clientY)-o,f&&(E=B+(Y-k),I=T-(w-j)),(Math.abs(Y-k)>10||Math.abs(w-j)>10)&&(d=!0)},t.onmousewheel=function(t){return!O||(M+=t.wheelDelta/5,!1)},J(),window.addEventListener("resize",J,!1),setInterval(function(){document.getElementById("fps").innerHTML=2*C,C=0},500),document.getElementById("alpha").onchange=function(){a=this.checked},document.getElementById("autor").onchange=function(){H=this.checked},document.getElementById("destroy").onchange=function(){q=this.checked},document.getElementById("stopgo").onclick=function(){O=!O,document.getElementById("stopgo").value=O?"STOP":"GO!",O&&Q()},document.getElementById("reset").onclick=function(){K()},K(),Q()},Q=function t(){i.ctx.fillStyle=D,i.ctx.fillRect(0,0,h,c),L+=.05*(I-L),S+=.05*(E-S),P+=.05*(M-P),H&&(M+=1),v=Math.cos(.01*S),m=Math.sin(.01*S),y=Math.cos(.01*L),x=Math.sin(.01*L),g=Math.cos(.01*P),b=Math.sin(.01*P),X=0;for(var s,o=0;s=e[o++];)for(var r=0,a=void 0;a=s.points[r++];)a.projection();var p=100-X-A;A+=p*(p>0?.05:.01);for(var u,l=0;u=n[l++];)u.faceVisible()&&u.distanceToCamera();for(n.sort(function(t,i){return i.distance-t.distance}),l=0;(u=n[l++])&&u.visible;)u.draw();C++,O&&requestAnimationFrame(t)};N();
},{}]},{},["Focm"], null)
//# sourceMappingURL=3d-cubes.e054b3e0.js.map