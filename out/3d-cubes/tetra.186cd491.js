!function(){var e,t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire01a7,o=t("5rLfZ"),i=(e=o())&&e.__esModule?e.default:e,s=t("6GgW6"),n=t("7fPRq");o(),s();var a=[{firstObjectSize:89,objectsCount:16,duplicateFactor:.4,duplicateMethod:"sum",autorotate:!0,autorotateSpeed:5,revertInnerRotate:!1,innerRotateSpeed:10,mouseRotatePower:28,mouseRotateInertia:1e3,mouseMagnetic:1,centerX:.7,centerY:.32,perspective:1e3,size:1.2,framesOverlay:0,gradCenter:{x:.37,y:.37},gradRadius:.6,gradMiddlePoint:.7,gradColor1:{r:191.25,g:127.5,b:255},gradColor2:{r:91.8,g:200.6,b:255},gradColor3:{r:153,g:255,b:153},gradPreview:!1,preset:0}];n();let r=[];class d{constructor(e,t){this.draw=e=>{this.sum=this.point0.X+this.point0.Y+this.point1.X+this.point1.Y,-1===r.indexOf(this.sum)?(r.push(this.sum),e.globalAlpha=1):e.globalAlpha=0,e.beginPath(),e.moveTo(this.point0.X,this.point0.Y),e.lineTo(this.point1.X,this.point1.Y),e.closePath(),e.stroke()},this.point0=e,this.point1=t,this.sum=e.X+e.Y+t.X+t.Y}static eraseAll(){r=[]}}class c{constructor(e,t){t&&(this.parent=t),this.xo=e[0],this.yo=e[1],this.zo=e[2]}}let p,l,u,h=window.innerWidth,m=window.innerHeight,f=h/2,w=m/2,g={x:f,y:w,inertia:.09,mode:"bloat",power:30,coverage:160};window.addEventListener("resize",(()=>{h=window.innerWidth,m=window.innerHeight}));let v=!1,x=(e,t)=>{f=y(f,e),w=y(w,t),g.x=f,g.y=w,v||(p=requestAnimationFrame((()=>x(l,u))))},y=(e,t)=>{let o=t-e,i=e+o*g.inertia;return Math.abs(o)<5&&(cancelAnimationFrame(p),v=!0,i=t),i};function b(e){e.preventDefault(),cancelAnimationFrame(p),v=!1,l=void 0!==e.clientX?e.clientX:e.touches[0].clientX,u=void 0!==e.clientY?e.clientY:e.touches[0].clientY,x(l,u)}window.addEventListener("mousemove",b),window.addEventListener("touchmove",b);class I{constructor(e,t){this.rotate=(e,t,o)=>{this.angleX=e,this.angleY=t,this.angleZ=o,this.cosY=Math.cos(t),this.sinY=Math.sin(t),this.cosX=Math.cos(e),this.sinX=Math.sin(e),this.cosZ=Math.cos(o),this.sinZ=Math.sin(o)},this.projectPoint=e=>{let t=this.cosY*(this.sinZ*e.yo+this.cosZ*e.xo)-this.sinY*e.zo,o=this.sinX*(this.cosY*e.zo+this.sinY*(this.sinZ*e.yo+this.cosZ*e.xo))+this.cosX*(this.cosZ*e.yo-this.sinZ*e.xo),i=this.cosX*(this.cosY*e.zo+this.sinY*(this.sinZ*e.yo+this.cosZ*e.xo))-this.sinX*(this.cosZ*e.yo-this.sinZ*e.xo);this.x=t,this.y=o,this.z=i;let s=C*Y.centerX+t*(Y.perspective/(i+Y.zoom)),n=Z*Y.centerY+o*(Y.perspective/(i+Y.zoom));{let t=function(e,t){if(!g.mode)return[e,t];let o=e-g.x,i=t-g.y,s=Math.sqrt(o**2+i**2),n=Math.E**(-s/g.power);if("bloat"==g.mode)return[e+o*n,t+i*n];if("repel"==g.mode){let n=0,a=0;if(s<g.coverage){let e=g.power/g.coverage,t=Math.atan2(i,o);n=(Math.cos(t)*g.coverage-o)*e,a=(Math.sin(t)*g.coverage-i)*e}return[e+n,t+a]}if("attract"==g.mode)return[e-o*n,t-i*n]}(s,n);e.X=t[0],e.Y=t[1]}},this.projection=()=>this.points.forEach((e=>this.projectPoint(e))),this.sort=t,this.r=e,this.points=[],this.rotate(0,0,0),this.forceX=0,this.forceY=0;let o=Math.SQRT2,i=[[e,0,-e/o],[-e,0,-e/o],[0,-e,e/o],[0,e,e/o]];for(let e=0;e<i.length;e++)this.points.push(new c(i[e]));let s=[[0,1],[1,2],[2,0],[2,3],[3,0],[3,1]];for(let e=0;e<s.length;e++)j.push(new d(this.points[s[e][0]],this.points[s[e][1]]))}}function R(e){return e.reduce(((e,t)=>(e[t]=t,e)),{})}let M={firstObjectSize:100,objectsCount:12,bgLight:!0,duplicateMethod:"sum",duplicateFactor:.4,framesOverlay:0,perspective:1500,autorotate:!0,autorotateSpeed:25,innerRotateSpeed:15,revertInnerRotate:!1,mouseRotatePower:25,mouseRotateInertia:200,mousePower:30,mouseCoverage:160,mouseMode:"bloat",zoom:1,size:1.2,centerX:.5,centerY:.5,...s().gradParams},Y=Object.assign({},M);window.pane=new i({container:document.querySelector("[data-pane]")});let S,X,z,P,j,C,Z,O=pane.addFolder({title:"Настройки",expanded:!1});O.addInput(Y,"firstObjectSize",{min:1,max:200,step:1}),O.addInput(Y,"objectsCount",{min:1,max:50,step:1}),O.addInput(Y,"duplicateFactor",{min:.01,max:3,step:.001}),O.addInput(Y,"duplicateMethod",{options:R(["sum","multiply"])}),O.addInput(Y,"autorotate"),O.addInput(Y,"autorotateSpeed",{min:0,max:100,step:1}),O.addInput(Y,"revertInnerRotate"),O.addInput(Y,"innerRotateSpeed",{min:0,max:100,step:1}),O.addInput(Y,"mouseRotatePower",{min:1,max:100,step:1}),O.addInput(Y,"mouseRotateInertia",{min:1,max:1e3,step:1}),O.addInput(Y,"mousePower",{min:1,max:200,step:1}),O.addInput(Y,"mouseCoverage",{min:1,max:800,step:1}),O.addInput(Y,"mouseMode",{options:R(["bloat","repel","attract"])}),O.addInput(Y,"centerX",{min:0,max:1,step:.01}),O.addInput(Y,"centerY",{min:0,max:1,step:.01}),O.addInput(Y,"perspective",{min:0,max:3e3,step:1}),O.addInput(Y,"size",{min:.1,max:4,step:.1}),O.addInput(Y,"framesOverlay",{min:0,max:1,step:.01}),O.addSeparator(),s().createGradControls(O,Y),O.addInput({preset:0},"preset",{options:a.reduce(((e,t,o)=>(e["preset "+(o+1)]=o,e)),{})}),a.length&&(Object.assign(Y,M,a[0]),pane.refresh()),O.addButton({title:"Copy preset"}).on("click",(()=>navigator.clipboard.writeText(n().default(pane.exportPreset())))),document.querySelector(".box").addEventListener("click",(()=>O.expanded=!1));let F,q,A=50,E=50,L=0,T=0,k=0,W=0,G=function(){C=S.offsetWidth,Z=S.offsetHeight,X.width=C,X.height=Z};function H(){P=[],j=[];let e=Y.firstObjectSize;for(let t=0;t<Y.objectsCount;t++)P.push(new I(e,t)),"sum"===Y.duplicateMethod?e+=Y.duplicateFactor*Y.firstObjectSize:"multiply"===Y.duplicateMethod&&(e*=Y.duplicateFactor)}function K(){if(d.eraseAll(),z.save(),Y.gradPreview)z.fillStyle=q,z.fillRect(0,0,X.width,X.height);else{z.fillStyle=`rgba(255, 255, 255, ${1-Y.framesOverlay})`,z.fillRect(0,0,C,Z),A=g.x*Y.mouseRotatePower/100,E=-g.y*Y.mouseRotatePower/100,z.strokeStyle=q,F=0;let e,t=0;for(;e=P[t++];){k+=(E-k)/Y.mouseRotateInertia,T+=(A-T)/Y.mouseRotateInertia,W+=(L-W)/Y.mouseRotateInertia;let o=Y.revertInnerRotate?Y.objectsCount-t+1:t+1;o*=Y.innerRotateSpeed/1e5,e.rotate(k*o,T*o,W*o),e.projection()}Y.autorotate&&(L+=Y.autorotateSpeed/10);let o,i=0;for(;o=j[i++];)o.draw(z)}z.restore(),requestAnimationFrame(K)}let D=()=>q=s().getActualGradient(X,Y),_=()=>Y.zoom=Y.perspective*Y.size;window.pane.on("change",(e=>{"mouseMode"==e.presetKey&&(g.mode=e.value),"mousePower"==e.presetKey&&(g.power=e.value),"mouseCoverage"==e.presetKey&&(g.coverage=e.value),_(),H(),D()})),S=document.querySelector(".box"),X=document.querySelector("[data-canvas]"),z=X.getContext("2d"),window.addEventListener("mousewheel",(e=>{L+=e.wheelDelta})),G(),window.addEventListener("resize",G,!1),H(),D(),K(),_(),window.params=Y}();
//# sourceMappingURL=tetra.186cd491.js.map
